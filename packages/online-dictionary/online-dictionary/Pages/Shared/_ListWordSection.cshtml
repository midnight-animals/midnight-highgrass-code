<div>
    <div id="wordListContainer">
        <!-- Word list will be displayed here -->
    </div>

    <button id="previous-btn">Previous</button>
    <span id="pageLinks"></span>
    <button id="next-btn">Next</button>
    <div id="pageContainer"></div>
</div>
<script>
    // JavaScript code to retrieve data from API and populate word list
    let currentPage = 1; // Set the initial page number
    let totalPage = 1;
    const pageSize = 20; // Set the page size
    const pageLinksContainer = document.getElementById("pageLinks");

    function generatePageLinks(currentPage, totalPage) {
        pageLinksContainer.innerHTML = ''; // Clear previous links
        const pagesToShow = 5; // Number of page links to show

        // Calculate start and end page numbers
        let startPage = Math.max(1, currentPage - Math.floor(pagesToShow / 2));
        let endPage = Math.min(totalPage, startPage + pagesToShow - 1);

        // Adjust start page if end page is at the maximum
        startPage = Math.max(1, endPage - pagesToShow + 1);

        // Add page links
        for (let i = startPage; i <= endPage; i++) {
            const pageLink = document.createElement('button');
            pageLink.textContent = i;
            pageLink.addEventListener('click', () => {
                currentPage = i;
                fetchWords(currentPage);
            });
            pageLinksContainer.appendChild(pageLink);
        }
    }

    function fetchWords(page) {
        console.log(`/api/words?page=${page}&pageSize=${pageSize}`);
        fetch(`/api/words?page=${page}&pageSize=${pageSize}`)
            .then(response => response.json())
            .then(json => {
                totalPage = json.totalPage;
                // Process words and generate HTML for word list
                const wordListContainer = document.getElementById('wordListContainer');
                const pageContainer = document.getElementById('pageContainer');
                wordListContainer.innerHTML = '';

                json.data.forEach(word => {
                    const wordItem = document.createElement('a');
                    wordItem.href = `/definition/${word.word}`;
                    wordItem.textContent = word.word;
                    wordListContainer.appendChild(wordItem);
                    wordListContainer.appendChild(document.createElement('br')); // Add line break
                });
                const count = document.createElement('div');
                count.textContent = `Showing ${json.count} word(s)`;
                wordListContainer.appendChild(count);

                pageContainer.textContent = `Page ${json.page} of ${json.totalPage} total pages`;
                generatePageLinks(currentPage, totalPage);

            })
            .catch(error => console.error('Error fetching words:', error));
    }

    fetchWords(currentPage); // Fetch words for the initial page

    document.addEventListener('DOMContentLoaded', () => {
        const previousPageButton = document.getElementById("previous-btn");
        const nextPageButton = document.getElementById("next-btn");
        previousPageButton.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                fetchWords(currentPage);
            }
        });

        nextPageButton.addEventListener('click', () => {
            if (currentPage < totalPage) {
                currentPage++;
                fetchWords(currentPage);
            }
        });

    });
</script>
